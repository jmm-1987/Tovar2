{% extends "base.html" %}

{% block title %}Editar Factura Directa{% endblock %}

{% block content %}
<div class="container" style="max-width: 1400px; margin-top: 10px;">
    <form method="POST" id="facturaForm">
        <!-- Título y campos principales en la misma línea -->
        <div style="display: flex; align-items: flex-end; gap: 15px; margin-bottom: 10px; flex-wrap: wrap;">
            <h2 style="margin: 0; flex: 0 0 auto;">Editar Factura Directa</h2>
            
            <div class="form-group" style="flex: 0 0 180px;">
                <label for="fecha_expedicion">Fecha de Expedición *</label>
                <input type="date" name="fecha_expedicion" id="fecha_expedicion" value="{{ factura.fecha_expedicion.strftime('%Y-%m-%d') }}" required class="form-control" style="width: 100%;">
            </div>
            
            <div class="form-group" style="flex: 0 0 200px;">
                <label for="tipo_factura">Tipo de Factura *</label>
                <select name="tipo_factura" id="tipo_factura" required class="form-control" style="width: 100%;">
                    <option value="F1" {% if factura.tipo_factura == 'F1' %}selected{% endif %}>F1 - Factura Completa</option>
                    <option value="F2" {% if factura.tipo_factura == 'F2' %}selected{% endif %}>F2 - Factura Simplificada</option>
                </select>
            </div>
            
            <div class="form-group" style="flex: 1 1 250px; min-width: 250px;">
                <label for="cliente_id">Cliente (AUTOCOMPLETAR)</label>
                <select name="cliente_id" id="cliente_id" class="form-control" onchange="cargarDatosCliente()" style="width: 100%;">
                    <option value="">Seleccionar cliente...</option>
                    {% for cliente in clientes %}
                    <option value="{{ cliente.id }}" 
                            {% if factura.cliente_id == cliente.id %}selected{% endif %}
                            data-nombre="{{ cliente.nombre }}" 
                            data-nif="{{ cliente.nif or '' }}"
                            data-direccion="{{ cliente.direccion or '' }}"
                            data-poblacion="{{ cliente.poblacion or '' }}"
                            data-provincia="{{ cliente.provincia or '' }}"
                            data-codigo-postal="{{ cliente.codigo_postal or '' }}"
                            data-telefono="{{ cliente.telefono or '' }}"
                            data-email="{{ cliente.email or '' }}">{{ cliente.nombre }}{% if cliente.nif %} - {{ cliente.nif }}{% endif %}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        
        <!-- Datos del cliente -->
        <h3 style="margin-top: 10px; margin-bottom: 8px; font-size: 1.1rem;">Datos del Cliente</h3>
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 10px; margin-bottom: 8px;">
            <div class="form-group">
                <label for="nombre_cliente">Nombre del Cliente *</label>
                <input type="text" name="nombre_cliente" id="nombre_cliente" value="{{ factura.nombre }}" required class="form-control" placeholder="Nombre completo del cliente" style="width: 100%;">
            </div>
            
            <div class="form-group">
                <label for="nif_cliente">NIF/CIF del Cliente *</label>
                <input type="text" name="nif_cliente" id="nif_cliente" value="{{ factura.nif or '' }}" required class="form-control" placeholder="NIF o CIF" style="width: 100%;">
            </div>
        </div>
        
        <div class="form-group" style="margin-bottom: 8px;">
            <label for="direccion_cliente">Dirección *</label>
            <input type="text" name="direccion_cliente" id="direccion_cliente" value="{{ cliente_directo.direccion if cliente_directo and cliente_directo.direccion else '' }}" required class="form-control" placeholder="Dirección completa" style="width: 100%;">
        </div>
        
        <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 10px; margin-bottom: 8px;">
            <div class="form-group">
                <label for="poblacion_cliente">Población *</label>
                <input type="text" name="poblacion_cliente" id="poblacion_cliente" value="{{ cliente_directo.poblacion if cliente_directo and cliente_directo.poblacion else '' }}" required class="form-control" placeholder="Población" style="width: 100%;">
            </div>
            
            <div class="form-group">
                <label for="provincia_cliente">Provincia *</label>
                <input type="text" name="provincia_cliente" id="provincia_cliente" value="{{ cliente_directo.provincia if cliente_directo and cliente_directo.provincia else '' }}" required class="form-control" placeholder="Provincia" style="width: 100%;">
            </div>
            
            <div class="form-group">
                <label for="codigo_postal_cliente">Código Postal *</label>
                <input type="text" name="codigo_postal_cliente" id="codigo_postal_cliente" value="{{ cliente_directo.codigo_postal if cliente_directo and cliente_directo.codigo_postal else '' }}" required class="form-control" placeholder="CP" style="width: 100%;">
            </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
            <div class="form-group">
                <label for="telefono_cliente">Teléfono</label>
                <input type="text" name="telefono_cliente" id="telefono_cliente" value="{{ cliente_directo.telefono if cliente_directo and cliente_directo.telefono else '' }}" class="form-control" placeholder="Teléfono" style="width: 100%;">
            </div>
            
            <div class="form-group">
                <label for="email_cliente">Email</label>
                <input type="email" name="email_cliente" id="email_cliente" value="{{ cliente_directo.email if cliente_directo and cliente_directo.email else '' }}" class="form-control" placeholder="Email" style="width: 100%;">
            </div>
        </div>
        
        <div class="form-group" style="margin-bottom: 10px;">
            <label for="descripcion">Descripción de la Operación</label>
            <textarea name="descripcion" id="descripcion" rows="2" class="form-control" placeholder="Descripción general de la factura" style="width: 100%; max-width: 520px;">{{ factura.descripcion or '' }}</textarea>
        </div>
        
        <h3 style="margin-top: 10px; margin-bottom: 8px; font-size: 1.1rem;">Líneas de la Factura</h3>
        <!-- Cabeceras de las columnas -->
        <div class="linea-factura-header">
            <div class="linea-factura-numero-header">#</div>
            <div class="linea-factura-campos-header">
                <div class="header-col" style="flex: 1; min-width: 500px;">Descripción</div>
                <div class="header-col" style="flex: 0 0 80px; width: 80px;">Cant.</div>
                <div class="header-col" style="flex: 0 0 80px; width: 80px;">Talla</div>
                <div class="header-col" style="flex: 0 0 100px; width: 100px;">P. Unit.</div>
                <div class="header-col" style="flex: 0 0 80px; width: 80px;">Desc. %</div>
                <div class="header-col" style="flex: 0 0 100px; width: 100px;">P. Final</div>
                <div class="header-col" style="flex: 0 0 100px; width: 100px; text-align: right;">Importe</div>
                <div class="header-col" style="flex: 0 0 30px; width: 30px;"></div>
            </div>
        </div>
        <div id="lineas-container">
            {% for linea in factura.lineas %}
            <div class="linea-factura-row">
                <div class="linea-factura-numero">#{{ loop.index }}</div>
                <div class="linea-factura-campos">
                    <input type="text" name="descripcion_linea[]" value="{{ linea.descripcion }}" placeholder="Descripción" required class="linea-campo-compact" style="flex: 1; min-width: 500px;">
                    <input type="number" name="cantidad[]" value="{{ linea.cantidad }}" placeholder="Cant." step="0.01" required class="linea-campo-compact linea-cantidad" style="flex: 0 0 80px; width: 80px;">
                    <input type="text" name="talla[]" value="{{ linea.talla or '' }}" placeholder="Talla" class="linea-campo-compact" style="flex: 0 0 80px; width: 80px;">
                    <input type="number" name="precio_unitario[]" value="{{ linea.precio_unitario }}" placeholder="P. Unit." step="0.01" required class="linea-campo-compact precio-unitario" style="flex: 0 0 100px; width: 100px;">
                    <input type="number" name="descuento[]" value="{{ linea.descuento or 0 }}" class="linea-campo-compact descuento-input" step="0.01" min="0" max="100" placeholder="Desc. %" title="Descuento (%)" style="flex: 0 0 80px; width: 80px;">
                    <input type="number" name="precio_final[]" value="{{ linea.precio_final or '' }}" class="linea-campo-compact precio-final-input" step="0.01" placeholder="P. Final" title="Precio Final" readonly style="flex: 0 0 100px; width: 100px; background: #f0f0f0;">
                    <span class="importe-linea" style="flex: 0 0 100px; padding: 8px; text-align: right; font-weight: bold;">{{ "%.2f"|format(linea.importe) }} €</span>
                    <button type="button" class="btn-eliminar-linea" style="padding: 4px 8px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer; {% if factura.lineas|length > 1 %}display: block;{% else %}display: none;{% endif %} flex: 0 0 30px;">×</button>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div style="margin-top: 15px;">
            <button type="button" id="agregar-linea" class="btn btn-secondary" style="padding: 8px 16px; font-size: 0.85rem;">+ Agregar Línea</button>
        </div>
        
        <div style="margin-top: 30px; padding: 15px; background: #f8f9fa; border-radius: 6px; max-width: 400px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <strong>Base Imponible:</strong>
                <span id="base-imponible">0.00</span> €
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px; align-items: center;">
                <label for="tipo_iva" style="margin: 0; font-weight: 500;">Tipo de IVA (%):</label>
                <select name="tipo_iva" id="tipo_iva" class="form-control" style="width: 100px; padding: 4px 8px; border: 1px solid #dee2e6; border-radius: 4px;">
                    <option value="21" {% if factura.tipo_iva == 21 %}selected{% endif %}>21%</option>
                    <option value="10" {% if factura.tipo_iva == 10 %}selected{% endif %}>10%</option>
                    <option value="4" {% if factura.tipo_iva == 4 %}selected{% endif %}>4%</option>
                    <option value="0" {% if factura.tipo_iva == 0 %}selected{% endif %}>0%</option>
                </select>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <strong id="iva-label">IVA ({{ factura.tipo_iva or 21 }}%):</strong>
                <span id="iva-total">0.00</span> €
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px; padding-top: 10px; border-top: 1px solid #dee2e6;">
                <strong>Subtotal:</strong>
                <span id="subtotal">0.00</span> €
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px; align-items: center;">
                <label for="descuento_pronto_pago" style="margin: 0; font-weight: 500;">Descuento por pronto pago (%):</label>
                <input type="number" name="descuento_pronto_pago" id="descuento_pronto_pago" step="0.01" min="0" max="100" value="{{ factura.descuento_pronto_pago or 0 }}" placeholder="0" style="width: 80px; padding: 4px 8px; border: 1px solid #dee2e6; border-radius: 4px; text-align: right;">
            </div>
            <div style="display: {% if factura.descuento_pronto_pago and factura.descuento_pronto_pago > 0 %}flex{% else %}none{% endif %}; justify-content: space-between; margin-bottom: 10px;" id="descuento-pronto-pago-row">
                <strong style="color: #28a745;">Descuento aplicado:</strong>
                <span id="descuento-aplicado" style="color: #28a745;">0.00</span> €
            </div>
            <div style="display: flex; justify-content: space-between; padding-top: 10px; border-top: 2px solid #dee2e6;">
                <strong style="font-size: 1.2rem;">Total:</strong>
                <strong style="font-size: 1.2rem;"><span id="importe-total">0.00</span> €</strong>
            </div>
        </div>
        
        <div style="margin-top: 30px; display: flex; gap: 10px;">
            <button type="submit" class="btn btn-primary" style="padding: 10px 20px;">Guardar Cambios</button>
            <a href="{{ url_for('facturacion.facturacion') }}" class="btn btn-secondary" style="padding: 10px 20px; text-decoration: none;">Cancelar</a>
        </div>
    </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const lineasContainer = document.getElementById('lineas-container');
    let lineaCount = {{ factura.lineas|length }};
    
    // Función para calcular precio final con descuento
    function calcularPrecioFinal(lineaRow) {
        const precioUnitarioInput = lineaRow.querySelector('.precio-unitario');
        const descuentoInput = lineaRow.querySelector('.descuento-input');
        const precioFinalInput = lineaRow.querySelector('.precio-final-input');
        
        if (!precioUnitarioInput || !descuentoInput || !precioFinalInput) return;
        
        const precioUnitario = parseFloat(precioUnitarioInput.value) || 0;
        const descuento = parseFloat(descuentoInput.value) || 0;
        
        // Permitir números negativos - si el precio es negativo, mantenerlo negativo
        // Solo aplicar descuento si ambos son positivos
        if (precioUnitario !== 0 && descuento > 0 && precioUnitario > 0) {
            const precioFinal = precioUnitario * (1 - descuento / 100);
            precioFinalInput.value = precioFinal.toFixed(2);
        } else {
            // Mantener el precio unitario (puede ser negativo)
            precioFinalInput.value = precioUnitario.toFixed(2);
        }
        
        calcularImporteLinea(lineaRow);
    }
    
    // Función para calcular importe de línea
    function calcularImporteLinea(lineaRow) {
        const cantidadInput = lineaRow.querySelector('.linea-cantidad');
        const precioFinalInput = lineaRow.querySelector('.precio-final-input');
        const precioUnitarioInput = lineaRow.querySelector('.precio-unitario');
        const importeSpan = lineaRow.querySelector('.importe-linea');
        
        const cantidad = parseFloat(cantidadInput.value) || 0;
        // Usar precio final si existe y tiene valor, sino usar precio unitario
        let precio = 0;
        if (precioFinalInput && precioFinalInput.value !== '') {
            precio = parseFloat(precioFinalInput.value) || 0;
        } else if (precioUnitarioInput && precioUnitarioInput.value !== '') {
            precio = parseFloat(precioUnitarioInput.value) || 0;
        }
        
        const importe = cantidad * precio;
        // Permitir números negativos
        importeSpan.textContent = (importe >= 0 ? '' : '-') + Math.abs(importe).toFixed(2) + ' €';
        actualizarTotales();
    }
    
    // Función para actualizar totales
    function actualizarTotales() {
        // Sumar todas las líneas (sin IVA) - permitir números negativos
        let baseImponible = 0;
        document.querySelectorAll('.importe-linea').forEach(span => {
            let texto = span.textContent.replace(' €', '').trim();
            // Manejar números negativos - el texto puede tener el signo menos
            // parseFloat maneja correctamente los números negativos
            const valor = parseFloat(texto) || 0;
            baseImponible += valor;
        });
        
        // Obtener tipo de IVA seleccionado
        const tipoIva = parseFloat(document.getElementById('tipo_iva').value) || 21;
        
        // Actualizar etiqueta de IVA
        document.getElementById('iva-label').textContent = `IVA (${tipoIva}%):`;
        
        // Calcular IVA según el tipo seleccionado - puede ser negativo si base es negativa
        const iva = baseImponible * (tipoIva / 100);
        
        // Subtotal (base + IVA)
        const subtotal = baseImponible + iva;
        
        // Calcular descuento por pronto pago sobre el subtotal
        const descuentoProntoPago = parseFloat(document.getElementById('descuento_pronto_pago').value) || 0;
        const descuentoAplicado = subtotal * (descuentoProntoPago / 100);
        const total = subtotal - descuentoAplicado;
        
        // Formatear números con signo negativo si es necesario
        const formatearNumero = (num) => {
            return (num >= 0 ? '' : '-') + Math.abs(num).toFixed(2);
        };
        
        document.getElementById('base-imponible').textContent = formatearNumero(baseImponible);
        document.getElementById('iva-total').textContent = formatearNumero(iva);
        document.getElementById('subtotal').textContent = formatearNumero(subtotal);
        
        // Mostrar/ocultar fila de descuento aplicado
        const descuentoRow = document.getElementById('descuento-pronto-pago-row');
        const descuentoAplicadoSpan = document.getElementById('descuento-aplicado');
        if (descuentoProntoPago > 0) {
            descuentoRow.style.display = 'flex';
            descuentoAplicadoSpan.textContent = formatearNumero(descuentoAplicado);
        } else {
            descuentoRow.style.display = 'none';
            descuentoAplicadoSpan.textContent = '0.00';
        }
        
        document.getElementById('importe-total').textContent = formatearNumero(total);
    }
    
    // Calcular totales iniciales
    actualizarTotales();
    
    // Event listener para descuento por pronto pago
    document.getElementById('descuento_pronto_pago').addEventListener('input', function() {
        actualizarTotales();
    });
    
    // Event listener para tipo de IVA
    document.getElementById('tipo_iva').addEventListener('change', function() {
        actualizarTotales();
    });
    
    // Agregar nueva línea
    document.getElementById('agregar-linea').addEventListener('click', function() {
        lineaCount++;
        const primeraLinea = lineasContainer.querySelector('.linea-factura-row');
        const nuevaLinea = primeraLinea.cloneNode(true);
        
        // Limpiar valores
        nuevaLinea.querySelectorAll('input').forEach(input => {
            if (input.type === 'number') {
                if (input.classList.contains('linea-cantidad')) {
                    input.value = '1';
                } else if (input.classList.contains('descuento-input')) {
                    input.value = '0';
                } else if (input.classList.contains('precio-final-input')) {
                    input.value = '';
                } else {
                    input.value = '';
                }
            } else {
                input.value = '';
            }
        });
        nuevaLinea.querySelector('.importe-linea').textContent = '0.00 €';
        
        // Actualizar número
        nuevaLinea.querySelector('.linea-factura-numero').textContent = '#' + lineaCount;
        
        // Mostrar botón eliminar
        nuevaLinea.querySelector('.btn-eliminar-linea').style.display = 'block';
        
        // Añadir event listeners
        const cantidadInput = nuevaLinea.querySelector('.linea-cantidad');
        const precioUnitarioInput = nuevaLinea.querySelector('.precio-unitario');
        const descuentoInput = nuevaLinea.querySelector('.descuento-input');
        const precioFinalInput = nuevaLinea.querySelector('.precio-final-input');
        
        cantidadInput.addEventListener('input', function() {
            calcularImporteLinea(nuevaLinea);
        });
        
        precioUnitarioInput.addEventListener('input', function() {
            calcularPrecioFinal(nuevaLinea);
        });
        
        descuentoInput.addEventListener('input', function() {
            calcularPrecioFinal(nuevaLinea);
        });
        
        precioFinalInput.addEventListener('input', function() {
            calcularImporteLinea(nuevaLinea);
        });
        
        // Botón eliminar
        nuevaLinea.querySelector('.btn-eliminar-linea').addEventListener('click', function() {
            if (lineasContainer.querySelectorAll('.linea-factura-row').length > 1) {
                nuevaLinea.remove();
                renumerarLineas();
                actualizarTotales();
            } else {
                alert('Debe haber al menos una línea en la factura');
            }
        });
        
        lineasContainer.appendChild(nuevaLinea);
    });
    
    // Renumerar líneas
    function renumerarLineas() {
        document.querySelectorAll('.linea-factura-row').forEach((linea, index) => {
            linea.querySelector('.linea-factura-numero').textContent = '#' + (index + 1);
        });
    }
    
    // Event listeners para todas las líneas existentes
    document.querySelectorAll('.linea-factura-row').forEach(lineaRow => {
        const cantidadInput = lineaRow.querySelector('.linea-cantidad');
        const precioUnitarioInput = lineaRow.querySelector('.precio-unitario');
        const descuentoInput = lineaRow.querySelector('.descuento-input');
        const precioFinalInput = lineaRow.querySelector('.precio-final-input');
        
        if (cantidadInput) {
            cantidadInput.addEventListener('input', function() {
                calcularImporteLinea(lineaRow);
            });
        }
        
        if (precioUnitarioInput) {
            precioUnitarioInput.addEventListener('input', function() {
                calcularPrecioFinal(lineaRow);
            });
        }
        
        if (descuentoInput) {
            descuentoInput.addEventListener('input', function() {
                calcularPrecioFinal(lineaRow);
            });
        }
        
        if (precioFinalInput) {
            precioFinalInput.addEventListener('input', function() {
                calcularImporteLinea(lineaRow);
            });
        }
        
        // Botón eliminar
        const btnEliminar = lineaRow.querySelector('.btn-eliminar-linea');
        if (btnEliminar) {
            btnEliminar.addEventListener('click', function() {
                if (lineasContainer.querySelectorAll('.linea-factura-row').length > 1) {
                    lineaRow.remove();
                    renumerarLineas();
                    actualizarTotales();
                } else {
                    alert('Debe haber al menos una línea en la factura');
                }
            });
        }
    });
    
    // Cargar datos del cliente
    window.cargarDatosCliente = function() {
        const selectCliente = document.getElementById('cliente_id');
        const optionSeleccionada = selectCliente.options[selectCliente.selectedIndex];
        
        if (optionSeleccionada && optionSeleccionada.value) {
            const nombre = optionSeleccionada.getAttribute('data-nombre') || '';
            const nif = optionSeleccionada.getAttribute('data-nif') || '';
            const direccion = optionSeleccionada.getAttribute('data-direccion') || '';
            const poblacion = optionSeleccionada.getAttribute('data-poblacion') || '';
            const provincia = optionSeleccionada.getAttribute('data-provincia') || '';
            const codigoPostal = optionSeleccionada.getAttribute('data-codigo-postal') || '';
            const telefono = optionSeleccionada.getAttribute('data-telefono') || '';
            const email = optionSeleccionada.getAttribute('data-email') || '';
            
            document.getElementById('nombre_cliente').value = nombre;
            document.getElementById('nif_cliente').value = nif;
            document.getElementById('direccion_cliente').value = direccion;
            document.getElementById('poblacion_cliente').value = poblacion;
            document.getElementById('provincia_cliente').value = provincia;
            document.getElementById('codigo_postal_cliente').value = codigoPostal;
            document.getElementById('telefono_cliente').value = telefono;
            document.getElementById('email_cliente').value = email;
        } else {
            // Limpiar campos si no hay cliente seleccionado
            document.getElementById('nombre_cliente').value = '';
            document.getElementById('nif_cliente').value = '';
            document.getElementById('direccion_cliente').value = '';
            document.getElementById('poblacion_cliente').value = '';
            document.getElementById('provincia_cliente').value = '';
            document.getElementById('codigo_postal_cliente').value = '';
            document.getElementById('telefono_cliente').value = '';
            document.getElementById('email_cliente').value = '';
        }
    };
});
</script>

<style>
.linea-factura-header {
    display: flex;
    align-items: stretch;
    gap: 8px;
    margin-bottom: 8px;
    padding: 8px;
    background: #e9ecef;
    border-radius: 6px;
    font-weight: 600;
    font-size: 0.85rem;
    color: #495057;
}

.linea-factura-numero-header {
    font-weight: bold;
    min-width: 35px;
    width: 35px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.linea-factura-campos-header {
    display: flex;
    gap: 8px;
    flex: 1;
    align-items: stretch;
}

.header-col {
    font-weight: 600;
    font-size: 0.85rem;
    color: #495057;
    box-sizing: border-box;
    padding: 6px 8px;
    display: flex;
    align-items: center;
    border: 1px solid #dee2e6;
    border-radius: 4px;
    background: transparent;
}

.linea-factura-row {
    display: flex;
    align-items: stretch;
    gap: 8px;
    margin-bottom: 8px;
    padding: 8px;
    background: #f8f9fa;
    border-radius: 6px;
}

.linea-factura-numero {
    font-weight: bold;
    color: #495057;
    min-width: 35px;
    width: 35px;
    font-size: 0.9rem;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
}

.linea-factura-campos {
    display: flex;
    gap: 8px;
    flex: 1;
    align-items: stretch;
}

.linea-campo-compact {
    padding: 6px 8px;
    border: 1px solid #dee2e6;
    border-radius: 4px;
    font-size: 0.85rem;
    box-sizing: border-box;
}

.linea-factura-campos input[type="text"]:first-of-type {
    min-width: 500px;
}

.importe-linea {
    font-size: 0.9rem;
}

.btn-eliminar-linea:hover {
    background: #c82333 !important;
}

.form-group {
    margin-bottom: 0;
}

.form-group label {
    display: block;
    margin-bottom: 3px;
    font-size: 0.85rem;
    font-weight: 500;
    color: #495057;
}

.form-control {
    padding: 6px 10px;
    font-size: 0.9rem;
}
</style>
{% endblock %}




