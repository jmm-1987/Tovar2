{% extends "base.html" %}

{% block title %}Editar Proveedor - Gastos{% endblock %}

{% block content %}
<h2>Editar Proveedor</h2>

<form method="POST">
    <div class="form-row-compact">
        <div class="form-group-compact">
            <label for="nombre">Nombre *</label>
            <input type="text" name="nombre" id="nombre" value="{{ proveedor.nombre }}" required placeholder="Nombre del proveedor">
        </div>

        <div class="form-group-compact">
            <label for="cif">CIF</label>
            <input type="text" name="cif" id="cif" value="{{ proveedor.cif or '' }}" placeholder="CIF del proveedor">
        </div>
    </div>

    <div class="form-row-compact">
        <div class="form-group-compact">
            <label for="telefono">Teléfono</label>
            <input type="text" name="telefono" id="telefono" value="{{ proveedor.telefono or '' }}" placeholder="Teléfono de contacto">
        </div>

        <div class="form-group-compact">
            <label for="movil">Móvil</label>
            <input type="text" name="movil" id="movil" value="{{ proveedor.movil or '' }}" placeholder="Teléfono móvil">
        </div>
    </div>

    <div class="form-row-compact">
        <div class="form-group-compact">
            <label for="correo">Correo Electrónico</label>
            <input type="email" name="correo" id="correo" value="{{ proveedor.correo or '' }}" placeholder="correo@ejemplo.com">
        </div>

        <div class="form-group-compact">
            <label for="persona_contacto">Persona de Contacto</label>
            <input type="text" name="persona_contacto" id="persona_contacto" value="{{ proveedor.persona_contacto or '' }}" placeholder="Nombre de la persona de contacto">
        </div>
    </div>

    <div class="actions">
        <button type="submit" class="btn btn-success">Actualizar Proveedor</button>
        <a href="{{ url_for('gastos.listado_proveedores') }}" class="btn btn-danger">Cancelar</a>
    </div>
</form>

<div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid {% if proveedor.activo %}#28a745{% else %}#dc3545{% endif %};">
    <h3 style="margin-top: 0; color: #2c3e50;">Estado del Proveedor</h3>
    <p style="margin-bottom: 15px;">
        <strong>Estado actual:</strong> 
        {% if proveedor.activo %}
            <span style="color: #28a745; font-weight: 600;">✓ Activo</span>
        {% else %}
            <span style="color: #dc3545; font-weight: 600;">✗ Desactivado</span>
        {% endif %}
    </p>
    <form method="POST" action="{{ url_for('gastos.toggle_proveedor', proveedor_id=proveedor.id) }}" style="display: inline;">
        {% if proveedor.activo %}
            <button type="submit" class="btn btn-warning" onclick="return confirm('¿Está seguro de desactivar este proveedor?');">
                Desactivar Proveedor
            </button>
        {% else %}
            <button type="submit" class="btn btn-success" onclick="return confirm('¿Está seguro de activar este proveedor?');">
                Activar Proveedor
            </button>
        {% endif %}
    </form>
</div>
{% endblock %}

