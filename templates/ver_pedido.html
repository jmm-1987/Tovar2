{% extends "base.html" %}

{% block title %}Ver Pedido #{{ pedido.id }} - Gestión de Pedidos{% endblock %}

{% block content %}
<div style="margin-bottom: 20px;">
    <a href="{{ url_for('index.index') }}" class="btn btn-primary">← Volver a la lista</a>
    <a href="{{ url_for('pedidos.editar_pedido', pedido_id=pedido.id) }}" class="btn btn-warning">Editar</a>
</div>

<h2>Pedido #{{ pedido.id }} - {{ pedido.cliente.nombre if pedido.cliente else 'N/A' }}</h2>

<div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-bottom: 30px;">
    <!-- Columna 1: Datos del Cliente -->
    <div>
        <div class="card" style="background-color: white; padding: 20px; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 20px;">
            <h3 style="color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 10px; margin-bottom: 15px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;" onclick="toggleSection('cliente-content')">
                <span>Datos del Cliente</span>
                <span id="cliente-toggle" style="font-size: 18px;">▶</span>
            </h3>
            <div id="cliente-content" style="display: none;">
                <p><strong>Nombre:</strong> {{ pedido.cliente.nombre if pedido.cliente else 'N/A' }}</p>
                
                {% if pedido.cliente.direccion %}
                <p><strong>Dirección:</strong> {{ pedido.cliente.direccion }}</p>
                {% endif %}
                
                {% if pedido.cliente.telefono %}
                <p><strong>Teléfono:</strong> {{ pedido.cliente.telefono }}</p>
                {% endif %}
                
                {% if pedido.cliente.email %}
                <p><strong>Email:</strong> {{ pedido.cliente.email }}</p>
                {% endif %}
            </div>
        </div>
    </div>
    
    <!-- Columna 2: Datos del Pedido -->
    <div>
        <div class="card" style="background-color: white; padding: 20px; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h3 style="color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 10px; margin-bottom: 15px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;" onclick="toggleSection('pedido-content')">
                <span>Datos del Pedido</span>
                <span id="pedido-toggle" style="font-size: 18px;">▶</span>
            </h3>
            <div id="pedido-content" style="display: none;">
                {% if pedido.presupuesto_id %}
                <p><strong>Presupuesto:</strong> 
                    <a href="{{ url_for('presupuestos.ver_presupuesto', presupuesto_id=pedido.presupuesto_id) }}" style="color: #3498db; text-decoration: none; font-weight: 600;">#{{ pedido.presupuesto_id }}</a>
                </p>
                {% endif %}
                
                <p><strong>Estado:</strong> 
                    <span class="badge badge-estado-{{ pedido.estado|lower|replace(' ', '-')|replace('ó', 'o')|replace('í', 'i')|replace('é', 'e')|replace('de', 'de') }}">{{ pedido.estado }}</span>
                </p>
                
                <p><strong>Tipo de Pedido:</strong> {{ pedido.tipo_pedido }}</p>
                
                <p><strong>Comercial:</strong> {{ pedido.comercial.nombre if pedido.comercial else 'N/A' }}</p>
                
                {% if pedido.fecha_creacion %}
                <p><strong>Fecha de Creación:</strong> {{ pedido.fecha_creacion.strftime('%d/%m/%Y') }}</p>
                {% endif %}
                
                {% if pedido.forma_pago %}
                <p><strong>Forma de Pago:</strong> {{ pedido.forma_pago }}</p>
                {% endif %}
                
                {% if pedido.fecha_aceptacion %}
                <p><strong>Fecha de Aceptación:</strong> {{ pedido.fecha_aceptacion.strftime('%d/%m/%Y') }}</p>
                {% endif %}
                
                {% if fecha_objetivo %}
                <p><strong>Fecha Objetivo de Entrega:</strong> 
                    <span class="fecha-objetivo {{ fecha_class }}">
                        {{ fecha_objetivo.strftime('%d/%m/%Y') }}
                    </span>
                </p>
                {% endif %}
                
                {% if pedido.fecha_entrega_trabajo %}
                <p><strong>Fecha Entrega Weark:</strong> {{ pedido.fecha_entrega_trabajo.strftime('%d/%m/%Y') }}</p>
                {% endif %}
                
                {% if pedido.fecha_envio_taller %}
                <p><strong>Fecha Envío Taller Confección:</strong> {{ pedido.fecha_envio_taller.strftime('%d/%m/%Y') }}</p>
                {% endif %}
                
                {% if pedido.fecha_entrega_bordados %}
                <p><strong>Fecha Entrega Bordados:</strong> {{ pedido.fecha_entrega_bordados.strftime('%d/%m/%Y') }}</p>
                {% endif %}
                
                {% if pedido.fecha_entrega_cliente %}
                <p><strong>Fecha Entrega al Cliente:</strong> {{ pedido.fecha_entrega_cliente.strftime('%d/%m/%Y') }}</p>
                {% endif %}
            </div>
        </div>
    </div>
    
    <!-- Columna 3: Imagen del Diseño -->
    <div>
        {% if pedido.imagen_diseno %}
        <div class="card" style="background-color: white; padding: 20px; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h3 style="color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 10px; margin-bottom: 15px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;" onclick="toggleSection('diseno-content')">
                <span>Diseño</span>
                <span id="diseno-toggle" style="font-size: 18px;">▶</span>
            </h3>
            <div id="diseno-content" style="display: none;">
                <img src="{{ url_for('static', filename='uploads/' + pedido.imagen_diseno) }}" 
                     alt="Diseño del pedido" 
                     style="max-width: 100%; max-height: 400px; width: auto; height: auto; border: 1px solid #ddd; border-radius: 4px; object-fit: contain; display: block; margin: 0 auto 15px;">
                {% set tiene_imagenes_adicionales = pedido.imagen_adicional_1 or pedido.imagen_adicional_2 or pedido.imagen_adicional_3 or pedido.imagen_adicional_4 or pedido.imagen_adicional_5 %}
                {% if tiene_imagenes_adicionales %}
                <button type="button" onclick="abrirModalImagenes()" 
                        style="width: 100%; padding: 10px; background-color: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 500;">
                    Ver todas las imágenes
                </button>
                {% endif %}
            </div>
        </div>
        {% else %}
        <div class="card" style="background-color: white; padding: 20px; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center; display: flex; align-items: center; justify-content: center; min-height: 200px;">
            <p style="color: #999;">No hay imagen de diseño</p>
        </div>
        {% endif %}
    </div>
</div>

<!-- Sección para cambiar estados -->
<div class="card" style="background-color: white; padding: 20px; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 30px;">
    <h3 style="color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 10px; margin-bottom: 20px;">Cambiar Estado del Pedido</h3>
    <p style="margin-bottom: 15px; color: #666;">Haz clic en el estado correspondiente para avanzar en el proceso. Se actualizará automáticamente la fecha si no está establecida.</p>
    
    <div style="display: flex; flex-wrap: nowrap; gap: 10px; overflow-x: auto; padding-bottom: 10px;">
        <div style="display: flex; flex-direction: column; align-items: center; min-width: 100px;">
            <form method="POST" action="{{ url_for('pedidos.cambiar_estado_pedido', pedido_id=pedido.id) }}" style="display: inline;">
                <input type="hidden" name="estado" value="Pendiente">
                <button type="submit" class="btn" style="background-color: {% if pedido.estado == 'Pendiente' %}#95a5a6{% else %}#bdc3c7{% endif %}; color: white; padding: 8px 12px; font-size: 12px; border: none; border-radius: 4px; cursor: pointer; white-space: nowrap;" 
                        onclick="return confirm('¿Marcar como Pendiente?')">
                    Pendiente
                </button>
            </form>
            {% if pedido.fecha_creacion %}
            <p style="margin-top: 5px; font-size: 11px; color: #666; margin-bottom: 0;">{{ pedido.fecha_creacion.strftime('%d/%m/%Y') }}</p>
            {% else %}
            <p style="margin-top: 5px; font-size: 11px; color: #999; margin-bottom: 0;">-</p>
            {% endif %}
        </div>
        
        <div style="display: flex; flex-direction: column; align-items: center; min-width: 100px;">
            <form method="POST" action="{{ url_for('pedidos.cambiar_estado_pedido', pedido_id=pedido.id) }}" style="display: inline;">
                <input type="hidden" name="estado" value="Diseño">
                <button type="submit" class="btn" style="background-color: {% if pedido.estado == 'Diseño' %}#9b59b6{% else %}#95a5a6{% endif %}; color: white; padding: 8px 12px; font-size: 12px; border: none; border-radius: 4px; cursor: pointer; white-space: nowrap;" 
                        onclick="return confirm('¿Marcar como Diseño?')">
                    Diseño
                </button>
            </form>
            {% if pedido.fecha_diseno %}
            <p style="margin-top: 5px; font-size: 11px; color: #666; margin-bottom: 0;">{{ pedido.fecha_diseno.strftime('%d/%m/%Y') }}</p>
            {% else %}
            <p style="margin-top: 5px; font-size: 11px; color: #999; margin-bottom: 0;">-</p>
            {% endif %}
        </div>
        
        <div style="display: flex; flex-direction: column; align-items: center; min-width: 130px;">
            <form method="POST" action="{{ url_for('pedidos.cambiar_estado_pedido', pedido_id=pedido.id) }}" style="display: inline;">
                <input type="hidden" name="estado" value="En preparación">
                <button type="submit" class="btn" style="background-color: {% if pedido.estado == 'En preparación' %}#3498db{% else %}#95a5a6{% endif %}; color: white; padding: 8px 12px; font-size: 12px; border: none; border-radius: 4px; cursor: pointer; white-space: nowrap;" 
                        onclick="return confirm('¿Marcar como En preparación?')">
                    En preparación
                </button>
            </form>
            {% if pedido.estado == 'En preparación' %}
                {% if pedido.fecha_aceptacion %}
                <p style="margin-top: 5px; font-size: 11px; color: #666; margin-bottom: 0;">{{ pedido.fecha_aceptacion.strftime('%d/%m/%Y') }}</p>
                {% else %}
                <p style="margin-top: 5px; font-size: 11px; color: #999; margin-bottom: 0;">-</p>
                {% endif %}
            {% elif pedido.fecha_aceptacion %}
            <p style="margin-top: 5px; font-size: 11px; color: #666; margin-bottom: 0;">{{ pedido.fecha_aceptacion.strftime('%d/%m/%Y') }}</p>
            {% else %}
            <p style="margin-top: 5px; font-size: 11px; color: #999; margin-bottom: 0;">-</p>
            {% endif %}
        </div>
        
        <div style="display: flex; flex-direction: column; align-items: center; min-width: 110px;">
            <form method="POST" action="{{ url_for('pedidos.cambiar_estado_pedido', pedido_id=pedido.id) }}" style="display: inline;">
                <input type="hidden" name="estado" value="Todo listo">
                <button type="submit" class="btn" style="background-color: {% if pedido.estado == 'Todo listo' %}#f39c12{% else %}#95a5a6{% endif %}; color: white; padding: 8px 12px; font-size: 12px; border: none; border-radius: 4px; cursor: pointer; white-space: nowrap;" 
                        onclick="return confirm('¿Marcar como Todo listo?')">
                    Todo listo
                </button>
            </form>
            {% if pedido.fecha_todo_listo %}
            <p style="margin-top: 5px; font-size: 11px; color: #666; margin-bottom: 0;">{{ pedido.fecha_todo_listo.strftime('%d/%m/%Y') }}</p>
            {% else %}
            <p style="margin-top: 5px; font-size: 11px; color: #999; margin-bottom: 0;">-</p>
            {% endif %}
        </div>
        
        <div style="display: flex; flex-direction: column; align-items: center; min-width: 100px;">
            <form method="POST" action="{{ url_for('pedidos.cambiar_estado_pedido', pedido_id=pedido.id) }}" style="display: inline;">
                <input type="hidden" name="estado" value="Enviado">
                <button type="submit" class="btn" style="background-color: {% if pedido.estado == 'Enviado' %}#27ae60{% else %}#95a5a6{% endif %}; color: white; padding: 8px 12px; font-size: 12px; border: none; border-radius: 4px; cursor: pointer; white-space: nowrap;" 
                        onclick="return confirm('¿Marcar como Enviado?')">
                    Enviado
                </button>
            </form>
            {% if pedido.fecha_enviado %}
            <p style="margin-top: 5px; font-size: 11px; color: #666; margin-bottom: 0;">{{ pedido.fecha_enviado.strftime('%d/%m/%Y') }}</p>
            {% else %}
            <p style="margin-top: 5px; font-size: 11px; color: #999; margin-bottom: 0;">-</p>
            {% endif %}
        </div>
        
        <div style="display: flex; flex-direction: column; align-items: center; min-width: 150px;">
            <form method="POST" action="{{ url_for('pedidos.cambiar_estado_pedido', pedido_id=pedido.id) }}" style="display: inline;">
                <input type="hidden" name="estado" value="Entregado al cliente">
                <button type="submit" class="btn" style="background-color: {% if pedido.estado == 'Entregado al cliente' %}#16a085{% else %}#95a5a6{% endif %}; color: white; padding: 8px 12px; font-size: 12px; border: none; border-radius: 4px; cursor: pointer; white-space: nowrap;" 
                        onclick="return confirm('¿Marcar como Entregado al cliente?')">
                    Entregado al cliente
                </button>
            </form>
            {% if pedido.estado == 'Entregado al cliente' %}
                {% if pedido.fecha_entrega_cliente %}
                <p style="margin-top: 5px; font-size: 11px; color: #666; margin-bottom: 0;">{{ pedido.fecha_entrega_cliente.strftime('%d/%m/%Y') }}</p>
                {% else %}
                <p style="margin-top: 5px; font-size: 11px; color: #999; margin-bottom: 0;">-</p>
                {% endif %}
            {% elif pedido.fecha_entrega_cliente %}
            <p style="margin-top: 5px; font-size: 11px; color: #666; margin-bottom: 0;">{{ pedido.fecha_entrega_cliente.strftime('%d/%m/%Y') }}</p>
            {% else %}
            <p style="margin-top: 5px; font-size: 11px; color: #999; margin-bottom: 0;">-</p>
            {% endif %}
        </div>
    </div>
</div>

<div class="card" style="background-color: white; padding: 20px; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
    <h3 style="color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 10px; margin-bottom: 20px;">Prendas del Pedido</h3>
    
    {% if pedido.lineas %}
    <div style="display: flex; flex-direction: column; gap: 15px;">
        {% for linea in pedido.lineas %}
        <div style="border: 1px solid #ddd; border-radius: 4px; padding: 15px; background-color: #f8f9fa;">
            <div style="display: flex; flex-wrap: wrap; gap: 15px; align-items: center;">
                <div><strong>Nombre para mostrar:</strong> {{ linea.nombre_mostrar if linea.nombre_mostrar else 'N/A' }}</div>
                
                <div><strong>Unidades:</strong> {{ linea.cantidad }}</div>
                
                <div><strong>Modelo:</strong> {{ linea.prenda.nombre if linea.prenda else 'N/A' }}</div>
                
                {% if linea.color %}<div><strong>Color:</strong> {{ linea.color }}</div>{% endif %}
                
                {% if linea.forma %}<div><strong>Forma:</strong> {{ linea.forma }}</div>{% endif %}
                
                {% if linea.sexo %}<div><strong>Sexo:</strong> {{ linea.sexo }}</div>{% endif %}
                
                {% if linea.talla %}<div><strong>Talla:</strong> {{ linea.talla }}</div>{% endif %}
                
                {% if linea.tejido %}<div><strong>Tejido:</strong> {{ linea.tejido }}</div>{% endif %}
                
                {% if linea.precio_unitario %}<div><strong>Precio:</strong> {{ "%.2f"|format(linea.precio_unitario) }} €</div>{% endif %}
                
                {% if linea.nombre %}<div><strong>Nombre personalizado:</strong> {{ linea.nombre }}</div>{% endif %}
                
                {% if linea.cargo %}<div><strong>Cargo:</strong> {{ linea.cargo }}</div>{% endif %}
                
                <div style="margin-left: auto; display: flex; align-items: center; gap: 10px;">
                    <strong>Estado:</strong>
                    <span class="badge badge-estado-linea badge-estado-{{ (linea.estado or 'pendiente')|lower|replace(' ', '-')|replace('ó', 'o')|replace('í', 'i')|replace('é', 'e') }}" style="margin-left: 8px;">
                        {{ linea.estado or 'pendiente' }}
                    </span>
                    <form method="POST" action="{{ url_for('pedidos.cambiar_estado_linea', pedido_id=pedido.id, linea_id=linea.id) }}" style="display: inline-block;">
                        <select name="estado" onchange="this.form.submit()" style="padding: 6px 12px; border-radius: 4px; border: 1px solid #ddd; font-size: 14px;">
                            <option value="pendiente" {% if (linea.estado or 'pendiente') == 'pendiente' %}selected{% endif %}>Pendiente</option>
                            <option value="en confección" {% if (linea.estado or 'pendiente') == 'en confección' %}selected{% endif %}>En confección</option>
                            <option value="en bordado" {% if (linea.estado or 'pendiente') == 'en bordado' %}selected{% endif %}>En bordado</option>
                            <option value="listo" {% if (linea.estado or 'pendiente') == 'listo' %}selected{% endif %}>Listo</option>
                        </select>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p>No hay prendas registradas en este pedido.</p>
    {% endif %}
</div>

<!-- Modal para ver todas las imágenes -->
<div id="modalImagenes" class="modal-imagenes" style="display: none;">
    <div class="modal-content-imagenes" style="background-color: white; margin: 5% auto; padding: 0; border-radius: 10px; max-width: 90%; max-height: 90vh; overflow-y: auto; box-shadow: 0 4px 20px rgba(0,0,0,0.3);">
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 20px; border-bottom: 2px solid #e0e0e0; background: #f8f9fa; border-radius: 10px 10px 0 0;">
            <h3 style="margin: 0; color: #2c3e50;">Todas las Imágenes del Pedido</h3>
            <span class="close-modal-imagenes" onclick="cerrarModalImagenes()" style="color: #aaa; font-size: 28px; font-weight: bold; cursor: pointer; line-height: 20px;">&times;</span>
        </div>
        <div style="padding: 20px;">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                {% if pedido.imagen_adicional_1 %}
                <div style="border: 1px solid #ddd; border-radius: 8px; padding: 15px; background-color: #f8f9fa;">
                    <h4 style="margin-top: 0; margin-bottom: 10px; color: #2c3e50; font-size: 16px;">Imagen 1</h4>
                    <img src="{{ url_for('static', filename='uploads/' + pedido.imagen_adicional_1) }}" 
                         alt="Imagen adicional 1" 
                         style="width: 100%; max-height: 400px; object-fit: contain; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 10px;">
                    {% if pedido.descripcion_imagen_1 %}
                    <p style="margin: 0; color: #666; font-size: 14px; padding: 10px; background-color: white; border-radius: 4px; border: 1px solid #e0e0e0;">
                        <strong>Descripción:</strong> {{ pedido.descripcion_imagen_1 }}
                    </p>
                    {% endif %}
                </div>
                {% endif %}
                
                {% if pedido.imagen_adicional_2 %}
                <div style="border: 1px solid #ddd; border-radius: 8px; padding: 15px; background-color: #f8f9fa;">
                    <h4 style="margin-top: 0; margin-bottom: 10px; color: #2c3e50; font-size: 16px;">Imagen 2</h4>
                    <img src="{{ url_for('static', filename='uploads/' + pedido.imagen_adicional_2) }}" 
                         alt="Imagen adicional 2" 
                         style="width: 100%; max-height: 400px; object-fit: contain; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 10px;">
                    {% if pedido.descripcion_imagen_2 %}
                    <p style="margin: 0; color: #666; font-size: 14px; padding: 10px; background-color: white; border-radius: 4px; border: 1px solid #e0e0e0;">
                        <strong>Descripción:</strong> {{ pedido.descripcion_imagen_2 }}
                    </p>
                    {% endif %}
                </div>
                {% endif %}
                
                {% if pedido.imagen_adicional_3 %}
                <div style="border: 1px solid #ddd; border-radius: 8px; padding: 15px; background-color: #f8f9fa;">
                    <h4 style="margin-top: 0; margin-bottom: 10px; color: #2c3e50; font-size: 16px;">Imagen 3</h4>
                    <img src="{{ url_for('static', filename='uploads/' + pedido.imagen_adicional_3) }}" 
                         alt="Imagen adicional 3" 
                         style="width: 100%; max-height: 400px; object-fit: contain; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 10px;">
                    {% if pedido.descripcion_imagen_3 %}
                    <p style="margin: 0; color: #666; font-size: 14px; padding: 10px; background-color: white; border-radius: 4px; border: 1px solid #e0e0e0;">
                        <strong>Descripción:</strong> {{ pedido.descripcion_imagen_3 }}
                    </p>
                    {% endif %}
                </div>
                {% endif %}
                
                {% if pedido.imagen_adicional_4 %}
                <div style="border: 1px solid #ddd; border-radius: 8px; padding: 15px; background-color: #f8f9fa;">
                    <h4 style="margin-top: 0; margin-bottom: 10px; color: #2c3e50; font-size: 16px;">Imagen 4</h4>
                    <img src="{{ url_for('static', filename='uploads/' + pedido.imagen_adicional_4) }}" 
                         alt="Imagen adicional 4" 
                         style="width: 100%; max-height: 400px; object-fit: contain; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 10px;">
                    {% if pedido.descripcion_imagen_4 %}
                    <p style="margin: 0; color: #666; font-size: 14px; padding: 10px; background-color: white; border-radius: 4px; border: 1px solid #e0e0e0;">
                        <strong>Descripción:</strong> {{ pedido.descripcion_imagen_4 }}
                    </p>
                    {% endif %}
                </div>
                {% endif %}
                
                {% if pedido.imagen_adicional_5 %}
                <div style="border: 1px solid #ddd; border-radius: 8px; padding: 15px; background-color: #f8f9fa;">
                    <h4 style="margin-top: 0; margin-bottom: 10px; color: #2c3e50; font-size: 16px;">Imagen 5</h4>
                    <img src="{{ url_for('static', filename='uploads/' + pedido.imagen_adicional_5) }}" 
                         alt="Imagen adicional 5" 
                         style="width: 100%; max-height: 400px; object-fit: contain; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 10px;">
                    {% if pedido.descripcion_imagen_5 %}
                    <p style="margin: 0; color: #666; font-size: 14px; padding: 10px; background-color: white; border-radius: 4px; border: 1px solid #e0e0e0;">
                        <strong>Descripción:</strong> {{ pedido.descripcion_imagen_5 }}
                    </p>
                    {% endif %}
                </div>
                {% endif %}
            </div>
            {% if not (pedido.imagen_adicional_1 or pedido.imagen_adicional_2 or pedido.imagen_adicional_3 or pedido.imagen_adicional_4 or pedido.imagen_adicional_5) %}
            <p style="text-align: center; color: #999; padding: 40px;">No hay imágenes adicionales</p>
            {% endif %}
        </div>
    </div>
</div>

<script>
function toggleSection(sectionId) {
    const content = document.getElementById(sectionId);
    const toggle = document.getElementById(sectionId.replace('-content', '-toggle'));
    
    if (content.style.display === 'none') {
        content.style.display = 'block';
        toggle.textContent = '▼';
    } else {
        content.style.display = 'none';
        toggle.textContent = '▶';
    }
}

function abrirModalImagenes() {
    document.getElementById('modalImagenes').style.display = 'block';
}

function cerrarModalImagenes() {
    document.getElementById('modalImagenes').style.display = 'none';
}

// Cerrar modal al hacer clic fuera
window.onclick = function(event) {
    const modal = document.getElementById('modalImagenes');
    if (event.target == modal) {
        cerrarModalImagenes();
    }
}
</script>

<style>
.modal-imagenes {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
    overflow-y: auto;
}

.modal-content-imagenes {
    animation: modalFadeIn 0.3s;
}

@keyframes modalFadeIn {
    from {
        opacity: 0;
        transform: translateY(-50px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.close-modal-imagenes:hover {
    color: #000;
}
</style>

{% endblock %}
